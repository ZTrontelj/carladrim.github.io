<!DOCTYPE html>
<html>
	<head>
		<title>ORCWall</title>
		<link rel="stylesheet" href="/css/forms.css" type="text/css">
		<link rel="shortcut icon" type="image/png" href="/resources/Images/favicon.png" />






	</head>
	<body>
		<div class="formwrapper">
			<form class="formwrapperauxiliar" id="idformwrapperauxiliar" method="POST" action="/user/interests">

				<div class="formfield">
					<label class="textform"><b>CHOOSE YOUR PROFILE PHOTO</b></label>

					<input  type="file" onchange="onFileSelected(event)">
				</div>


				<div  class="formfield">

						<label class="textform"><b>SEARCH FOR TOPICS TO FOLLOW</b></label>
						<input class="inputform" id="passwordinput" name="tags" type="text" placeholder="Look for hashtags" required>

					</ul>

				</DIV>


				<p>
            Enter some interests (separate them by a comma):
        </p>
        <p>
            <div class="tags-input" data-name="tags-input">

            </div>
        </p>


<script>
[].forEach.call(document.getElementsByClassName('tags-input'), function (el) {
    let hiddenInput = document.createElement('input'),
        mainInput = document.createElement('input'),
        tags = [];

    hiddenInput.setAttribute('type', 'hidden');
    hiddenInput.setAttribute('name', el.getAttribute('data-name'));

    mainInput.setAttribute('type', 'text');
    mainInput.classList.add('main-input');
    mainInput.addEventListener('input', function () {
        let enteredTags = mainInput.value.split(',');
        if (enteredTags.length > 1) {
            enteredTags.forEach(function (t) {
                let filteredTag = filterTag(t);
                if (filteredTag.length > 0)
                    addTag(filteredTag);
            });
            mainInput.value = '';
        }
    });

    mainInput.addEventListener('keydown', function (e) {
        let keyCode = e.which || e.keyCode;
        if (keyCode === 8 && mainInput.value.length === 0 && tags.length > 0) {
            removeTag(tags.length - 1);
        }
    });

    el.appendChild(mainInput);
    el.appendChild(hiddenInput);



    function addTag (text) {
        let tag = {
            text: text,
            element: document.createElement('span'),
        };

        tag.element.classList.add('tag');
        tag.element.textContent = tag.text;

        let closeBtn = document.createElement('span');
        closeBtn.classList.add('close');
        closeBtn.addEventListener('click', function () {
            removeTag(tags.indexOf(tag));
        });
        tag.element.appendChild(closeBtn);

        tags.push(tag);

        el.insertBefore(tag.element, mainInput);

        refreshTags();
    }

    function removeTag (index) {
        let tag = tags[index];
        tags.splice(index, 1);
        el.removeChild(tag.element);
        refreshTags();
    }

    function refreshTags () {
        let tagsList = [];
        tags.forEach(function (t) {
            tagsList.push(t.text);
        });
        hiddenInput.value = tagsList.join(',');
    }

    function filterTag (tag) {
        return tag.replace(/[^\w -]/g, '').trim().replace(/\W+/g, '-');
    }
});

</script>






				<div class="buttonsdiv">
					<button id="createaccountbutton" class="secbutton" type="button" onclick="location.href = '/user/login';">Skip this</button>
					<button id="loginbutton" class="mainbutton" type="submit">Save</button>
				</div>

			</form>
		</div>





	</body>
</html>
